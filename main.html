<!DOCTYPE html>
<html>
<head>
  <title>Draggable Cubes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .container {
      width: 600px;
      height: 400px;
      border: 2px solid black;
      margin: 40px auto;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      padding: 10px;
      position: relative; /* Important for dragging */
      overflow: hidden;
    }

    .cube {
      width: 80px;
      height: 80px;
      background-color: steelblue;
      cursor: grab;
      user-select: none;
    }

    .cube:active {
      cursor: grabbing;
    }
  </style>
</head>
<body>

<div class="container" id="container">
  <div class="cube"></div>
  <div class="cube"></div>
  <div class="cube"></div>
  <div class="cube"></div>
  <div class="cube"></div>
  <div class="cube"></div>
  <div class="cube"></div>
  <div class="cube"></div>
</div>

<script>
  const container = document.getElementById("container");
  const cubes = document.querySelectorAll(".cube");

  let activeCube = null;
  let offsetX = 0;
  let offsetY = 0;

  cubes.forEach(cube => {
    cube.addEventListener("mousedown", function (e) {

      activeCube = cube;

      const rect = cube.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;

      // Switch from grid positioning to absolute
      cube.style.position = "absolute";
      cube.style.zIndex = "1000";
    });
  });

  document.addEventListener("mousemove", function (e) {
    if (!activeCube) return;

    const containerRect = container.getBoundingClientRect();

    let newLeft = e.clientX - containerRect.left - offsetX;
    let newTop = e.clientY - containerRect.top - offsetY;

    // Boundary constraints
    const maxLeft = container.clientWidth - activeCube.offsetWidth;
    const maxTop = container.clientHeight - activeCube.offsetHeight;

    if (newLeft < 0) newLeft = 0;
    if (newTop < 0) newTop = 0;
    if (newLeft > maxLeft) newLeft = maxLeft;
    if (newTop > maxTop) newTop = maxTop;

    activeCube.style.left = newLeft + "px";
    activeCube.style.top = newTop + "px";
  });

  document.addEventListener("mouseup", function () {
    activeCube = null;
  });
</script>

</body>
</html>
